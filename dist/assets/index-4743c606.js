import{r as j,j as e,m as z,u as O,Q as f}from"./index-af889cc1.js";import{d as M}from"./GridView-81a883b8.js";import{u as _}from"./index.esm-c3d487d5.js";import{d as $}from"./Add-2c2882de.js";import{e as m,f as Y,P as H,h as W,i as F,c as C,d as t,j as q,k as L,u as A,a as E,I as b,l as P,m as k,n as N,o as S}from"./LastPage-dd44c61f.js";import{d as T}from"./dayjs.min-f7728a8e.js";import{B as w}from"./Button-37b8afe6.js";import{c as B}from"./canboApi-f8430c3d.js";import"./createSvgIcon-c7fd463f.js";import"./ButtonBase-df984b9e.js";function D(d){const a=A(),{count:s,page:o,rowsPerPage:r,onPageChange:i}=d,p=l=>{i(l,0)},u=l=>{i(l,o-1)},n=l=>{i(l,o+1)},c=l=>{i(l,Math.max(0,Math.ceil(s/r)-1))};return e.jsxs(E,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(b,{onClick:p,disabled:o===0,"aria-label":"first page",children:a.direction==="rtl"?e.jsx(P,{}):e.jsx(k,{})}),e.jsx(b,{onClick:u,disabled:o===0,"aria-label":"previous page",children:a.direction==="rtl"?e.jsx(N,{}):e.jsx(S,{})}),e.jsx(b,{onClick:n,disabled:o>=Math.ceil(s/r)-1,"aria-label":"next page",children:a.direction==="rtl"?e.jsx(S,{}):e.jsx(N,{})}),e.jsx(b,{onClick:c,disabled:o>=Math.ceil(s/r)-1,"aria-label":"last page",children:a.direction==="rtl"?e.jsx(k,{}):e.jsx(P,{})})]})}D.propTypes={count:m.number.isRequired,onPageChange:m.func.isRequired,page:m.number.isRequired,rowsPerPage:m.number.isRequired};function I({list:d,onChangeStatus:a}){const[s,o]=j.useState(0),[r,i]=j.useState(10);s>0&&Math.max(0,(1+s)*r-d.length);const p=(n,c)=>{o(c)},u=n=>{i(parseInt(n.target.value,10)),o(0)};return e.jsxs(e.Fragment,{children:[e.jsx(Y,{component:H,children:e.jsxs(W,{"aria-label":"custom pagination table",children:[e.jsx(F,{children:e.jsxs(C,{children:[e.jsx(t,{align:"left",rowSpan:2,style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"#"}),e.jsx(t,{align:"left",rowSpan:2,style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"Họ tên"}),e.jsx(t,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Ngày sinh"}),e.jsx(t,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Đơn vị trước khi chuyển công tác"}),e.jsx(t,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Đơn vị địa phương chuyển công tác đến"}),e.jsx(t,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Ngày chuyển công tác"}),e.jsx(t,{align:"right",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Thao tác"})]})}),e.jsx(q,{children:(r>0?d.slice(s*r,s*r+r):d).map((n,c)=>e.jsxs(C,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(t,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:s*r+c+1}),e.jsx(t,{className:"border-r border-slate-300",align:"left",children:e.jsx("span",{className:"font-bold",children:n.hoten})}),e.jsx(t,{className:"border-r border-slate-300",align:"left",children:T(n.ngaysinh).format("DD/MM/YYYY")}),e.jsx(t,{className:"border-r border-slate-300",align:"left",children:e.jsx("p",{className:"truncate",children:n.donvitruockhichuyen})}),e.jsx(t,{className:"border-r border-slate-300",align:"left",children:e.jsx("p",{className:"truncate",children:n.donvidiaphuongkhac.tendonvi})}),e.jsx(t,{className:"border-r border-slate-300",align:"left",children:T(n.ngaychuyendonvidiaphuongkhac).format("DD/MM/YYYY")}),e.jsx(t,{className:"border-r border-slate-300",align:"right",children:e.jsx(w,{variant:"contained",color:"info",size:"small",onClick:()=>a(n._id),children:"Thay đổi về công an tỉnh"})})]},n._id))})]})}),e.jsx("div",{children:e.jsx(L,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:d.length,rowsPerPage:r,page:s,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:p,onRowsPerPageChange:u,ActionsComponent:D,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:c,to:l,count:v}){return`hiển thị ${c} đến ${l} bản ghi trong tổng số ${v!==-1?v:`more than ${l}`} bản ghi`}})})]})}const ne=()=>{const[d,a]=z(),[s,o]=j.useState([]),r=O(),{register:i,handleSubmit:p,control:u,resetField:n,setValue:c,watch:l,formState:{errors:v}}=_({defaultValues:{hoten:""}}),y=async x=>{let h={...x};try{a(!0);let g=await B.getDoanvienNgoaitinh(h);o(g.data),a(!1)}catch(g){g.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(r("/login"),a(!1),f.error(g.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),f.error(g.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),a(!1)}};j.useEffect(()=>{y({hoten:""})},[]);const R=async x=>{a(!0);try{await B.backToCongantinh(x);let h=[...s];h=h.filter(g=>g._id.toString()!==x),o(h),a(!1),f.success("Thay đổi trạng thái thành công",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(h){f.error(h.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),a(!1)}};return e.jsxs("div",{className:"pr-2","data-aos":"fade-left","data-aos-once":"true",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(M,{color:"primary",fontSize:"large"}),e.jsx("h4",{className:"font-bold text-gray-800 text-lg",children:"Danh sách đoàn viên đã chuyển công tác khỏi công an tỉnh"})]}),e.jsx("form",{onSubmit:p(y),children:e.jsxs("div",{className:"flex mt-4 px-4 space-x-2 md:flex-row justify-end items-start",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Họ tên: "}),e.jsx("input",{...i("hoten"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                    focus:ring-2 focus:border-blue-400`})]}),e.jsx("div",{className:"flex-col flex md:basis-1/6",children:e.jsxs(w,{size:"small",type:"submit",sx:{width:"220px",backgroundColor:"gray"},color:"primary",variant:"contained",children:[e.jsx($,{})," Lấy dữ liệu"]})})]})}),e.jsx("div",{className:"px-4","data-aos":"fade-left","data-aos-once":"true",children:e.jsx("div",{className:"mt-4",children:e.jsx(I,{list:s,onChangeStatus:R})})})]})};export{ne as default};
