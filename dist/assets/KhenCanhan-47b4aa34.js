import{r as g,d as M,j as e,m as Re,k as We,u as qe,Q as N}from"./index-af889cc1.js";import{d as He}from"./GridView-81a883b8.js";import{d as q}from"./Search-2a58d6d5.js";import"./index.esm-a80e06b2.js";import{u as F,C as w}from"./index.esm-c3d487d5.js";import{d as L}from"./Add-2c2882de.js";import{d as Oe}from"./Close-b74d4c7a.js";import{k as T}from"./khenthuongApi-ef658fa2.js";import{S as P}from"./react-select.esm-34b6099d.js";import{f as ee,g as $e,S as ne,D as le,a as ae,h as se,d as te,b as re,c as ie,e as Qe}from"./DialogDelete-4539fb54.js";import"./DialogEditKhentapthe-b876d51f.js";import{C as Me,d as Ye}from"./FileDownload-0dedbaf1.js";import{c as E}from"./canboApi-f8430c3d.js";import{c as z,d as n,e as D,f as oe,P as de,h as ce,i as he,j as ue,k as xe,u as ge,a as Y,I as C,l as H,m as O,n as $,o as Q}from"./LastPage-dd44c61f.js";import{d as B}from"./dayjs.min-f7728a8e.js";import{B as v}from"./Button-37b8afe6.js";import{s as pe}from"./ButtonBase-df984b9e.js";import"./createSvgIcon-c7fd463f.js";import"./Link-f05ffa2b.js";const Ve=({row:l,onHandleChoiceCanbo:c,page:o,rowsPerPage:t,index:a})=>{g.useState(null);const i=M(p=>p.authReducer.roles_quanlydoanvien);return e.jsxs(z,{children:[e.jsx(n,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:o*t+a}),e.jsx(n,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:l.hoten}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:B(l.ngaysinh).format("DD/MM/YYYY")}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.bachamPopulate[0].bacham}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.chucvuPopulate[0].chucvu}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:e.jsx("p",{className:"truncate",children:l.doiPopulate[0].tendoi})}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:e.jsx("p",{className:"truncate",children:l.donviPopulate[0].tendonvi})}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.dangvien===!0?"Đảng viên":""}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:e.jsx("p",{className:"truncate",children:l.quequan})}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.gioitinh}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.CCCD}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.sohieuCAND}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.ngayvaodang!==""?B(l.ngayvaodang).format("DD/MM/YYYY"):""}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.trinhdo}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.lyluanchinhtri}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:B(l.bacham.tungay).format("DD/MM/YYYY")}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:B(l.chucvu.tungay).format("DD/MM/YYYY")}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:B(l.donvi.tungay).format("DD/MM/YYYY")}),e.jsx(n,{className:"border-r border-slate-300",align:"left"}),e.jsx(n,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1",style:{position:"absolute",right:"40px",height:"53px",width:"300px",display:"flex",flexDirection:"unset"},children:i&&i.includes("xem khen thưởng, kỉ luật")&&e.jsxs(v,{variant:"contained",color:"success",size:"small",onClick:()=>c(l),children:[e.jsx(ee,{style:{fontSize:"20px"}}),"Khen thưởng cá nhân"]})})]},l._id)};function me(l){const c=ge(),{count:o,page:t,rowsPerPage:a,onPageChange:i}=l,p=d=>{i(d,0)},j=d=>{i(d,t-1)},f=d=>{i(d,t+1)},y=d=>{i(d,Math.max(0,Math.ceil(o/a)-1))};return e.jsxs(Y,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(C,{onClick:p,disabled:t===0,"aria-label":"first page",children:c.direction==="rtl"?e.jsx(H,{}):e.jsx(O,{})}),e.jsx(C,{onClick:j,disabled:t===0,"aria-label":"previous page",children:c.direction==="rtl"?e.jsx($,{}):e.jsx(Q,{})}),e.jsx(C,{onClick:f,disabled:t>=Math.ceil(o/a)-1,"aria-label":"next page",children:c.direction==="rtl"?e.jsx(Q,{}):e.jsx($,{})}),e.jsx(C,{onClick:y,disabled:t>=Math.ceil(o/a)-1,"aria-label":"last page",children:c.direction==="rtl"?e.jsx(O,{}):e.jsx(H,{})})]})}me.propTypes={count:D.number.isRequired,onPageChange:D.func.isRequired,page:D.number.isRequired,rowsPerPage:D.number.isRequired};function Ke({list:l,onClickOpenDialogEdit:c,onHandleChoiceCanbo:o}){const[t,a]=g.useState(0),[i,p]=g.useState(10),j=t>0?Math.max(0,(1+t)*i-l.length):0,f=(d,r)=>{a(r)},y=d=>{p(parseInt(d.target.value,10)),a(0)};return e.jsxs(e.Fragment,{children:[e.jsx(oe,{component:de,style:{overflowX:"scroll"},children:e.jsxs(ce,{"aria-label":"custom pagination table",children:[e.jsx(he,{children:e.jsxs(z,{children:[e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"#"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"250px"},children:"Họ tên"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"120px"},children:"Ngày sinh"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"120px"},children:"Bậc hàm"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"300px"},children:"Chức vụ"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"300px"},children:"Đội, công an xã"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"300px"},children:"Đơn vị công tác"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"100px"},children:"Đảng viên"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"300px"},children:"Quê quán"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"100px"},children:"Giới tính"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"150px"},children:"Số CCCD"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"120px"},children:"Số hiệu CAND"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"150px"},children:"Ngày vào đảng"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"150px"},children:"Trình độ học vấn"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"150px"},children:"Lý luận chính trị"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"150px"},children:"Ngày lên hàm"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"150px"},children:"Ngày giữ chức vụ"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"250px"},children:"Ngày nhận công tác về đơn vị"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",minWidth:"300px"}}),e.jsx(n,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(64, 64, 64)",minWidth:"300px",position:"absolute",right:"40px"},children:"Thao tác"})]})}),e.jsxs(ue,{children:[(i>0?l.slice(t*i,t*i+i):l).map((d,r)=>e.jsx(Ve,{row:d,page:t,rowsPerPage:i,index:r+1,onHandleChoiceCanbo:o},d._id)),j>0&&e.jsx(z,{style:{height:53*j},children:e.jsx(n,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(xe,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:l.length,rowsPerPage:i,page:t,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:f,onRowsPerPageChange:y,ActionsComponent:me,labelRowsPerPage:"Số cán bộ hiển thị trên mỗi trang",labelDisplayedRows:function({from:r,to:b,count:k}){return`hiển thị ${r} đến ${b} cán bộ trong tổng số ${k!==-1?k:`more than ${b}`} cán bộ`}})})]})}const Ae=({row:l,page:c,rowsPerPage:o,index:t,onClickOpenDialogEdit:a,onClickOpenDialogDelete:i})=>{g.useState(null);const p=M(j=>j.authReducer.roles_quanlydoanvien);return e.jsxs(z,{className:"hover:bg-slate-200 transition duration-300",children:[e.jsx(n,{className:"border-r border-slate-300",align:"left",style:{fontWeight:"bold"},children:c*o+t}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:e.jsx("span",{className:"font-bold",children:l.soQD})}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.hinhthuc}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.capkhen}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.nguoiky}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:B(l.ngayky).format("DD/MM/YYYY")}),e.jsx(n,{className:"border-r border-slate-300",align:"left",children:l.noidung}),e.jsxs(n,{align:"right",className:"bg-gray-300 flex justify-center items-center space-x-1 hover:bg-slate-500 transition duration-300",style:{width:"180px"},children:[p&&p.includes("sửa khen thưởng, kỉ luật")&&e.jsx(v,{variant:"contained",color:"info",size:"small",onClick:()=>a(l),children:e.jsx(ee,{style:{fontSize:"20px"}})}),p&&p.includes("xóa khen thưởng, kỉ luật")&&e.jsx(v,{variant:"contained",color:"error",size:"small",style:{marginLeft:"4px"},onClick:()=>i(l._id),children:e.jsx($e,{style:{fontSize:"20px"}})})]})]},l._id)};function fe(l){const c=ge(),{count:o,page:t,rowsPerPage:a,onPageChange:i}=l,p=d=>{i(d,0)},j=d=>{i(d,t-1)},f=d=>{i(d,t+1)},y=d=>{i(d,Math.max(0,Math.ceil(o/a)-1))};return M(d=>d.authReducer.roles_quanlydoanvien),e.jsxs(Y,{sx:{flexShrink:0,ml:2.5},children:[e.jsx(C,{onClick:p,disabled:t===0,"aria-label":"first page",children:c.direction==="rtl"?e.jsx(H,{}):e.jsx(O,{})}),e.jsx(C,{onClick:j,disabled:t===0,"aria-label":"previous page",children:c.direction==="rtl"?e.jsx($,{}):e.jsx(Q,{})}),e.jsx(C,{onClick:f,disabled:t>=Math.ceil(o/a)-1,"aria-label":"next page",children:c.direction==="rtl"?e.jsx(Q,{}):e.jsx($,{})}),e.jsx(C,{onClick:y,disabled:t>=Math.ceil(o/a)-1,"aria-label":"last page",children:c.direction==="rtl"?e.jsx(O,{}):e.jsx(H,{})})]})}fe.propTypes={count:D.number.isRequired,onPageChange:D.func.isRequired,page:D.number.isRequired,rowsPerPage:D.number.isRequired};function Ee({list:l,onClickOpenDialogEdit:c,onClickOpenDialogDelete:o}){const[t,a]=g.useState(0),[i,p]=g.useState(10),j=t>0?Math.max(0,(1+t)*i-l.length):0,f=(d,r)=>{a(r)},y=d=>{p(parseInt(d.target.value,10)),a(0)};return e.jsxs(e.Fragment,{children:[e.jsx(oe,{component:de,children:e.jsxs(ce,{"aria-label":"custom pagination table",children:[e.jsx(he,{children:e.jsxs(z,{children:[e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"#"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )"},children:"Số quyết định"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Hình thức"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Cấp khen"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Người ký"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"100px",backgroundColor:"rgb(30, 41, 59 )"},children:"Ngày ký"}),e.jsx(n,{align:"left",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",minWidth:"200px",backgroundColor:"rgb(30, 41, 59 )"},children:"Nội dung khen"}),e.jsx(n,{align:"center",style:{fontSize:"14px",color:"#fff",padding:"8px 8px",backgroundColor:"rgb(30, 41, 59 )",maxWidth:"150px"},children:"Thao tác"})]})}),e.jsxs(ue,{children:[(i>0?l.slice(t*i,t*i+i):l).map((d,r)=>e.jsx(Ae,{row:d,page:t,rowsPerPage:i,index:r+1,onClickOpenDialogEdit:c,onClickOpenDialogDelete:o},d._id)),j>0&&e.jsx(z,{style:{height:53*j},children:e.jsx(n,{colSpan:6})})]})]})}),e.jsx("div",{children:e.jsx(xe,{rowsPerPageOptions:[10,25,50,100,{label:"Tất cả",value:-1}],count:l.length,rowsPerPage:i,page:t,SelectProps:{inputProps:{"aria-label":"rows per page"},native:!0},component:"div",onPageChange:f,onRowsPerPageChange:y,ActionsComponent:fe,labelRowsPerPage:"Số bản ghi hiển thị trên mỗi trang",labelDisplayedRows:function({from:r,to:b,count:k}){return`hiển thị ${r} đến ${b} bản ghi trong tổng số ${k!==-1?k:`more than ${b}`} bản ghi`}})})]})}const Fe=g.forwardRef(function(c,o){return e.jsx(ne,{direction:"up",ref:o,...c})}),Le=pe(C)({position:"absolute",right:"16px",top:"4px"});function Ge({open:l,onCloseDialogAdd:c,onSubmit:o}){const{register:t,handleSubmit:a,control:i,resetField:p,setValue:j,watch:f,formState:{errors:y}}=F({defaultValues:{}});g.useState([]);const d=async r=>{if(o){const b={...r};await o(b),p("soQD"),p("noidung")}};return e.jsx(e.Fragment,{children:e.jsxs(le,{maxWidth:"xl",fullWidth:!0,disableEscapeKeyDown:!0,onClose:(r,b)=>{b!=="backdropClick"&&c(r,b)},open:l,TransitionComponent:Fe,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[e.jsxs(ae,{style:{display:"flex",borderBottom:"1px solid #ccc",backgroundColor:"rgb(30, 41, 59 )",margin:"0px"},children:[e.jsx(se,{style:{color:"white",fontSize:"24px",marginRight:"8px"}}),e.jsx("span",{className:"text-white text-[18px]",children:"Thêm mới khen thưởng cá nhân"}),e.jsx(Le,{onClick:()=>c(),children:e.jsx(te,{style:{color:"white"}})})]}),e.jsx(re,{children:e.jsx(Y,{children:e.jsx("form",{className:"mt-2 mx-8",onSubmit:a(d),children:e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 p-2",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Số QĐ khen thưởng: "]}),e.jsx("input",{...t("soQD",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày ký: "]}),e.jsx("input",{...t("ngayky",{required:!0}),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Người ký: "]}),e.jsx("input",{...t("nguoiky",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Nội dung khen thưởng: "]}),e.jsx("input",{...t("noidung",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/2 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Hình thức khen: "]}),e.jsx(w,{control:i,name:"hinhthuc",render:({field:r})=>e.jsx(P,{options:[{label:"Giấy khen",value:"Giấy khen"},{label:"Bằng khen",value:"Bằng khen"},{label:"Cờ",value:"Cờ"},{label:"Huân chương",value:"Huân chương"},{label:"Huy chương",value:"Huy chương"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn hình thức",required:!0,...r})})]}),e.jsxs("div",{className:"flex-col md:basis-1/2 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"}),"Cấp khen: "]}),e.jsx(w,{control:i,name:"capkhen",render:({field:r})=>e.jsx(P,{options:[{label:"Công an tỉnh",value:"Công an tỉnh"},{label:"UBND tỉnh",value:"UBND tỉnh"},{label:"Tỉnh đoàn",value:"Tỉnh đoàn"},{label:"Ban thanh niên Công an tỉnh",value:"Ban thanh niên Công an tỉnh"},{label:"Bộ Công an",value:"Bộ Công an"},{label:"Trung ương",value:"Trung ương"},{label:"Chính phủ",value:"Chính phủ"},{label:"Khác",value:"Khác"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn cấp khen",required:!0,...r})})]}),e.jsx(ie,{children:e.jsxs(v,{color:"primary",variant:"contained",type:"submit",style:{margin:"4px auto"},children:[e.jsx(L,{}),e.jsx("span",{children:"Thêm mới"})]})})]})})})})]})})}const Ie=g.forwardRef(function(c,o){return e.jsx(ne,{direction:"up",ref:o,...c})}),Ue=pe(C)({position:"absolute",right:"16px",top:"4px"});function Xe({open:l,onCloseDialogEdit:c,item:o,onSubmit:t}){const{register:a,handleSubmit:i,control:p,resetField:j,setValue:f,watch:y,formState:{errors:d}}=F({defaultValues:{}});g.useState([]);const r=async b=>{if(t){const k={...b,id_edit:o._id};await t(k),c()}};return g.useEffect(()=>{o&&(f("soQD",o.soQD,{shouldValidate:!0}),f("hinhthuc",{label:o.hinhthuc,value:o.hinhthuc},{shouldValidate:!0}),f("capkhen",{label:o.capkhen,value:o.capkhen},{shouldValidate:!0}),f("noidung",o.noidung,{shouldValidate:!0}),f("ngayky",o.ngayky,{shouldValidate:!0}),f("nguoiky",o.nguoiky,{shouldValidate:!0}))},[o]),e.jsx(e.Fragment,{children:e.jsxs(le,{maxWidth:"xl",fullWidth:!0,disableEscapeKeyDown:!0,onClose:(b,k)=>{k!=="backdropClick"&&c(b,k)},open:l,TransitionComponent:Ie,keepMounted:!0,"aria-describedby":"alert-dialog-slide-description",children:[e.jsxs(ae,{style:{display:"flex",borderBottom:"1px solid #ccc",backgroundColor:"rgb(30, 41, 59 )",margin:"0px"},children:[e.jsx(se,{style:{color:"white",fontSize:"24px",marginRight:"8px"}}),e.jsx("span",{className:"text-white text-[18px]",children:"Chỉnh sửa khen thưởng đối với cá nhân"}),e.jsx(Ue,{onClick:()=>c(),children:e.jsx(te,{style:{color:"white"}})})]}),e.jsx(re,{children:e.jsx(Y,{children:e.jsx("form",{className:"mt-2 mx-8",onSubmit:i(r),children:e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 p-2",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Số QĐ khen thưởng: "]}),e.jsx("input",{...a("soQD",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Ngày ký: "]}),e.jsx("input",{...a("ngayky",{required:!0}),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Người ký: "]}),e.jsx("input",{...a("nguoiky",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Nội dung khen thưởng: "]}),e.jsx("input",{...a("noidung",{required:!0}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/2 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"})," Hình thức khen: "]}),e.jsx(w,{control:p,name:"hinhthuc",render:({field:b})=>e.jsx(P,{options:[{label:"Giấy khen",value:"Giấy khen"},{label:"Bằng khen",value:"Bằng khen"},{label:"Cờ",value:"Cờ"},{label:"Huân chương",value:"Huân chương"},{label:"Huy chương",value:"Huy chương"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn hình thức",required:!0,...b})})]}),e.jsxs("div",{className:"flex-col md:basis-1/2 flex flex-1 px-1",children:[e.jsxs("label",{className:"underline font-semibold",children:[e.jsx("span",{className:"text-red-600 font-semibold",children:" (*)"}),"Cấp khen: "]}),e.jsx(w,{control:p,name:"capkhen",render:({field:b})=>e.jsx(P,{options:[{label:"Công an tỉnh",value:"Công an tỉnh"},{label:"UBND tỉnh",value:"UBND tỉnh"},{label:"Tỉnh đoàn",value:"Tỉnh đoàn"},{label:"Ban thanh niên Công an tỉnh",value:"Ban thanh niên Công an tỉnh"},{label:"Bộ Công an",value:"Bộ Công an"},{label:"Trung ương",value:"Trung ương"},{label:"Chính phủ",value:"Chính phủ"},{label:"Khác",value:"Khác"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn cấp khen",required:!0,...b})})]}),e.jsx(ie,{children:e.jsxs(v,{color:"primary",variant:"contained",type:"submit",style:{margin:"4px auto"},children:[e.jsx(L,{}),e.jsx("span",{children:"Lưu dữ liệu"})]})})]})})})})]})})}let Je=[{label:"STT",key:"stt"},{label:"Số quyết định",key:"soQD"},{label:"Hình thức",key:"hinhthuc"},{label:"Cấp khen",key:"capkhen"},{label:"Người ký",key:"nguoiky"},{label:"Ngày ký",key:"ngayky"},{label:"Nội dung khen",key:"noidung"}];const Cn=()=>{const[l,c]=g.useState([]),[o,t]=g.useState(!1);g.useState([]);const[a,i]=g.useState(null);let[p,j]=g.useState([]);const[f,y]=g.useState({hoten:"",donvi:"",sohieuCAND:""}),[d,r]=Re();We();const[b,k]=g.useState([]),[be,G]=g.useState([]),[I,U]=g.useState({status:!1}),je=s=>{U({status:!0})},ye=()=>{U({...I,status:!1})},V=qe(),[K,X]=g.useState({status:!1,item:null}),[S,_]=g.useState({status:!1,id_Delete:null}),ke=s=>{X({item:s,status:!0})},Ce=()=>{X({...K,status:!1})},Ne=()=>{_({...S,status:!1})},ve=()=>{_({...S,status:!1})},De=s=>{_({status:!0,id_Delete:s})},{register:R,handleSubmit:Se,control:J,resetField:Ze,setValue:en,watch:Z,formState:{errors:nn}}=F({defaultValues:{hinhthuc:{label:"Tất cả",value:""},capkhen:{label:"Tất cả",value:""}}}),Pe=async s=>{let x={...s,capkhen:s.capkhen.value,hinhthuc:s.hinhthuc.value};try{r(!0);let h=await T.searchKhencanhans(a._id,x);c(h.data),j(h.data.map((u,m)=>({stt:m+1,soQD:u.soQD,ngayky:u.ngayky,noidung:u.noidung,nguoiky:u.nguoiky,hinhthuc:u.hinhthuc,capkhen:u.capkhen}))),setTimeout(()=>{r(!1)},400)}catch(h){h.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(V("/login"),r(!1),N.error(h.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),console.log(h.message)}};g.useEffect(()=>{(async()=>{try{r(!0);let x=await E.fetchDangvienList(f),h=await E.getDataForAddPerson(),u=[{label:"Tất cả",value:""}].concat(h.data.donvis.map(m=>({value:m._id,label:m.tendonvi})));k(u),G(x.data),setTimeout(()=>{r(!1)},400)}catch(x){x.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(V("/login"),r(!1),N.error(x.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),console.log(x.message)}})()},[]),g.useEffect(()=>{a&&(async()=>{try{r(!0);let x=await T.getKhencanhans(a._id);c(x.data),j(x.data.map((h,u)=>({stt:u+1,soQD:h.soQD,ngayky:h.ngayky,noidung:h.noidung,nguoiky:h.nguoiky,hinhthuc:h.hinhthuc,capkhen:h.capkhen}))),setTimeout(()=>{r(!1)},400)}catch(x){x.message==="Token không hợp lệ hoặc đã hết hạn. Vui lòng đăng nhập lại"&&(V("/login"),r(!1),N.error(x.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})),console.log(x.message)}})()},[a]);const Te=async s=>{s.preventDefault();try{r(!0);let x=await E.fetchDangvienList(f);r(!1),G(x.data)}catch(x){console.log(x.message)}},Be=s=>{i(s)},we=async s=>{let x={...s,id:a._id};r(!0);try{let h=await T.addKhencanhan(x),u=await T.getKhencanhans(a._id);c(u.data),j(u.data.map((m,A)=>({stt:A+1,soQD:m.soQD,ngayky:m.ngayky,noidung:m.noidung,hinhthuc:m.hinhthuc,nguoiky:m.nguoiky,capkhen:m.capkhen}))),r(!1),N.success(h.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(h){N.error(h.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),r(!1)}},ze=async()=>{r(!0);try{let s=await T.deleteKhencanhan(S.id_Delete),h=[...l].filter(u=>u._id.toString()!==S.id_Delete);c(h),j(h.map((u,m)=>({stt:m+1,soQD:u.soQD,ngayky:u.ngayky,nguoiky:u.nguoiky,noidung:u.noidung,hinhthuc:u.hinhthuc,capkhen:u.capkhen}))),setTimeout(()=>{r(!1)},400),_({...S,status:!1}),N.success(s.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(s){_({...S,status:!1}),N.error(s.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),r(!1)}},_e=async s=>{r(!0);try{let x=await T.editKhencanhan(s),h=[...l],u=l.findIndex(m=>m._id.toString()===s.id_edit);h[u].soQD=s.soQD,h[u].ngayky=s.ngayky,h[u].hinhthuc=s.hinhthuc.value,h[u].capkhen=s.capkhen.value,h[u].nguoiky=s.nguoiky,h[u].noidung=s.noidung,c(h),j(h.map((m,A)=>({stt:A+1,soQD:m.soQD,ngayky:m.ngayky,noidung:m.noidung,hinhthuc:m.hinhthuc,nguoiky:m.nguoiky,capkhen:m.capkhen}))),r(!1),N.success(x.data.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"})}catch(x){N.error(x.message,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),r(!1)}},W=M(s=>s.authReducer.roles_quanlydoanvien);return e.jsxs("div",{className:"pr-2","data-aos":"fade-left","data-aos-once":"true",children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(He,{color:"primary",fontSize:"large"}),e.jsxs("h4",{className:"font-bold text-gray-800 text-lg",children:["Quản lý khen thưởng đối với cá nhân",a&&e.jsxs("span",{className:"ml-2 text-blue-600 italic underline underline-offset-4",children:[a==null?void 0:a.bachamPopulate[0].bacham," ",a==null?void 0:a.hoten," - ",a==null?void 0:a.chucvuPopulate[0].chucvu,", ",a==null?void 0:a.donviPopulate[0].tendonvi]})]})]}),W&&W.includes("thêm khen thưởng, kỉ luật")&&e.jsxs("form",{onSubmit:s=>Te(s),className:"my-2 mt-4 p-4 rounded-lg shadow-xl",children:[e.jsxs("div",{className:"flex mb-4",children:[e.jsx(q,{}),e.jsx("h3",{className:"font-semibold",children:"Tìm kiếm đoàn viên"})]}),e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 bg-slate-300 p-2 rounded-md",children:[e.jsxs("div",{className:"flex-col flex md:basis-1/3 flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Họ và tên: "}),e.jsx("input",{onChange:s=>y({...f,hoten:s.target.value}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex md:basis-1/3 flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:" Số hiệu CAND: "}),e.jsx("input",{onChange:s=>y({...f,sohieuCAND:s.target.value}),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col flex flex-1 md:basis-1/3 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Đơn vị công tác:"}),e.jsx(P,{options:b,className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Tất cả",onChange:s=>y({...f,donvi:s.value})})]})]}),e.jsx("div",{className:"my-2 text-center",children:e.jsxs(v,{sx:{width:"200px",backgroundColor:"slategray"},type:"submit",color:"info",variant:"contained",children:[e.jsx(q,{})," Tìm kiếm"]})})]}),e.jsx("div",{className:"mt-6 mx-8",children:e.jsx(Ke,{list:be,onHandleChoiceCanbo:Be})}),a&&e.jsx("div",{}),a&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mt-4 text-end md:space-x-2 space-y-2 md:space-y-0 md:block flex flex-col items-center",children:[W&&W.includes("thêm khen thưởng, kỉ luật")&&e.jsxs(v,{type:"submit",sx:{width:"350px",backgroundColor:"gray"},onClick:()=>je(),color:"primary",variant:"contained",children:[e.jsx(L,{})," Thêm mới khen thưởng"]}),e.jsxs(v,{sx:{width:"300px",backgroundColor:"darkgray"},onClick:()=>t(!0),color:"info",variant:"contained",children:[e.jsx(q,{})," Chức năng tìm kiếm nâng cao"]}),e.jsx(C,{children:e.jsx(Me,{data:p,headers:Je,filename:`danhsachkhenthuong_${a==null?void 0:a.hoten}_${Z("tungay")}_${Z("denngay")}`,children:e.jsxs("div",{className:"flex items-center shadow-md space-x-2 bg-green-300 px-2 py-1 rounded-md",children:[e.jsx(Ye,{}),e.jsx("span",{className:"text-sm text-green-800",children:"Xuất file excel"})]})})})]}),o&&e.jsxs("form",{onSubmit:Se(Pe),className:"my-2 mt-4 mx-8 bg-slate-100 p-4 rounded-lg shadow-xl","data-aos":"zoom-in-down","data-aos-once":"true",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("h5",{className:"text-[18px] font-semibold",children:"Tìm kiếm nâng cao"}),e.jsx(C,{onClick:()=>t(!1),sx:{backgroundColor:"#333"},children:e.jsx(Oe,{sx:{color:"white"}})})]}),e.jsxs("div",{className:"flex flex-wrap xl:flex-row flex-col flex-1 p-2",children:[e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Số QĐ khen thưởng: "}),e.jsx("input",{...R("soQD"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                    focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/6 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Từ ngày: "}),e.jsx("input",{...R("tungay"),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/6 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Đến ngày: "}),e.jsx("input",{...R("denngay"),type:"date",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/3 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Người ký: "}),e.jsx("input",{...R("nguoiky"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-full flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Nội dung khen thưởng: "}),e.jsx("input",{...R("noidung"),type:"text",className:`outline-none my-4 border rounded-md p-2 border-neutral-600\r
                  focus:ring-2 focus:border-blue-400`})]}),e.jsxs("div",{className:"flex-col md:basis-1/2 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Hình thức khen: "}),e.jsx(w,{control:J,name:"hinhthuc",render:({field:s})=>e.jsx(P,{options:[{label:"Tất cả",value:""},{label:"Giấy khen",value:"Giấy khen"},{label:"Bằng khen",value:"Bằng khen"},{label:"Cờ",value:"Cờ"},{label:"Huân chương",value:"Huân chương"},{label:"Huy chương",value:"Huy chương"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn hình thức",...s})})]}),e.jsxs("div",{className:"flex-col md:basis-1/2 flex flex-1 px-1",children:[e.jsx("label",{className:"underline font-semibold",children:"Cấp khen: "}),e.jsx(w,{control:J,name:"capkhen",render:({field:s})=>e.jsx(P,{options:[{label:"Tất cả",value:""},{label:"Công an tỉnh",value:"Công an tỉnh"},{label:"Tỉnh đoàn",value:"Tỉnh đoàn"},{label:"Ban thanh niên Công an tỉnh",value:"Ban thanh niên Công an tỉnh"},{label:"Bộ Công an",value:"Bộ Công an"},{label:"Trung ương",value:"Trung ương"},{label:"Chính phủ",value:"Chính phủ"},{label:"Khác",value:"Khác"}],className:"basic-multi-select my-4 p-1",classNamePrefix:"select",placeholder:"Vui lòng chọn cấp khen",...s})})]})]}),e.jsx("div",{className:"my-2 text-center",children:e.jsxs(v,{sx:{width:"200px",backgroundColor:"slategray"},type:"submit",color:"info",variant:"contained",children:[e.jsx(q,{})," Tìm kiếm"]})})]})]}),a&&e.jsxs("div",{className:"mt-6 mx-8","data-aos":"zoom-in-up","data-aos-once":"true",children:[e.jsx("h3",{className:"text-center my-4 text-xl",children:"Danh sách kết quả khen thưởng đối với cá nhân"}),e.jsx(Ee,{list:l,onClickOpenDialogDelete:De,onClickOpenDialogEdit:ke})]}),e.jsx(Ge,{open:I.status,onSubmit:we,onCloseDialogAdd:ye}),e.jsx(Xe,{open:K.status,item:K.item,onSubmit:_e,onCloseDialogEdit:Ce}),e.jsx(Qe,{open:S.status,onCloseDialogDelete:ve,onConfirmDelete:ze,onCancelDelete:Ne})]})};export{Cn as default};
